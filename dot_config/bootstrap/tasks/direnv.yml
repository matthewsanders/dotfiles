---
- name: Install direnv on Fedora
  when: ansible_facts['os_family'] == 'RedHat'
  become: true
  package:
    name: direnv
    state: present

- name: Install direnv on macOS
  when: ansible_facts['os_family'] == 'Darwin'
  homebrew:
    name: direnv
    state: present

- name: Install direnv on Windows (WinGet)
  when: ansible_facts['os_family'] == 'Windows'
  win_command: >
    winget install --exact --id direnv.direnv --accept-package-agreements --accept-source-agreements
  args:
    creates: "C:\\Program Files\\direnv\\direnv.exe"
